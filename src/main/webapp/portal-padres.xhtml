<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="primefaces">

<h:head>
    <title>Portal de Padres</title>
    <link rel="stylesheet" href="css/style.css"/>
</h:head>

<h:body style="background: var(--surface-100)">

    <f:metadata>
        <f:viewAction action="#{LoginBean.evitarCache()}" />
        <f:viewAction action="#{LoginBean.verificarSesionPortalPadres()}" />
    </f:metadata>

    <div class="navbar" style="background: #1e1e1e; display: flex; place-content: space-between; padding: 1.5rem; border-bottom: 1px solid white; pointer-events: all">
        <h1><i class="pi pi-book" style="font-size: 1.7rem; margin-right: 0.5rem;"></i>Studify</h1>

        <h:form>
            <p:commandButton action="#{LoginBean.logout()}" style="font-weight: bold;" value="Salir"/>
        </h:form>
    </div>

    <div class="table-container table-cal" style="z-index: 10; margin-top: 100px">
        <h:form>
            <p:dataTable var="calificacion" value="#{CalificacionesBean.calificaciones}"  emptyMessage="No hay calififcaciones disponibles.">

                <f:facet name="header">
                    <p:outputLabel value="Calificaciones de #{LoginBean.estudiante.nombreCompletoCuenta()}"/>
                </f:facet>

                <p:column headerText="Año" sortBy="#{calificacion.anio}" filterBy="#{calificacion.anio}">
                    <h:outputText value="#{calificacion.anio}" />
                </p:column>

                <p:column headerText="Período" sortBy="#{calificacion.segundo_parcial}" filterBy="#{calificacion.segundo_parcial}">
                    <h:outputText value="#{calificacion.periodo}" />
                </p:column>

                <p:column headerText="Materia">
                    <h:outputText value="#{MateriasBean.mostrarNombreMateria(calificacion.id_materia)}" />
                </p:column>

                <p:column headerText="1P" sortBy="#{calificacion.primer_parcial}" filterBy="#{calificacion.primer_parcial}">
                    <h:outputText value="#{calificacion.primer_parcial}" />
                </p:column>

                <p:column headerText="2P" sortBy="#{calificacion.segundo_parcial}" filterBy="#{calificacion.segundo_parcial}">
                    <h:outputText value="#{calificacion.segundo_parcial}" />
                </p:column>

                <p:column headerText="3P" sortBy="#{calificacion.tercer_parcial}" filterBy="#{calificacion.tercer_parcial}">
                    <h:outputText value="#{calificacion.tercer_parcial}" />
                </p:column>

                <p:column headerText="Observación">
                    <h:outputText value="#{calificacion.observacion}" />
                </p:column>


            </p:dataTable>
        </h:form>
    </div>
</h:body>
</html>
